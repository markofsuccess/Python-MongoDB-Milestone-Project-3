{"filter":false,"title":"StarRating.js","tooltip":"/StarRating.js","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":67,"column":51},"action":"insert","lines":["class StarRating extends HTMLElement {","    get value () {","        return this.getAttribute('value') || 0;","    }","","    set value (val) {","        this.setAttribute('value', val);","        this.highlight(this.value - 1);","    }","","    get number () {","        return this.getAttribute('number') || 5;","    }","","    set number (val) {","        this.setAttribute('number', val);","","        this.stars = [];","","        while (this.firstChild) {","            this.removeChild(this.firstChild);","        }","","        for (let i = 0; i < this.number; i++) {","            let s = document.createElement('div');","            s.className = 'star';","            this.appendChild(s);","            this.stars.push(s);","        }","","        this.value = this.value;","    }","","    highlight (index) {","        this.stars.forEach((star, i) => {","            star.classList.toggle('full', i <= index);","        });","    }","","    constructor () {","        super();","","        this.number = this.number;","","        this.addEventListener('mousemove', e => {","            let box = this.getBoundingClientRect(),","                starIndex = Math.floor((e.pageX - box.left) / box.width * this.stars.length);","","            this.highlight(starIndex);","        });","","        this.addEventListener('mouseout', () => {","            this.value = this.value;","        });","","        this.addEventListener('click', e => {","            let box = this.getBoundingClientRect(),","                starIndex = Math.floor((e.pageX - box.left) / box.width * this.stars.length);","","            this.value = starIndex + 1;","","            let rateEvent = new Event('rate');","            this.dispatchEvent(rateEvent);","        });","    }","}","","customElements.define('x-star-rating', StarRating);"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":67,"column":51},"action":"remove","lines":["class StarRating extends HTMLElement {","    get value () {","        return this.getAttribute('value') || 0;","    }","","    set value (val) {","        this.setAttribute('value', val);","        this.highlight(this.value - 1);","    }","","    get number () {","        return this.getAttribute('number') || 5;","    }","","    set number (val) {","        this.setAttribute('number', val);","","        this.stars = [];","","        while (this.firstChild) {","            this.removeChild(this.firstChild);","        }","","        for (let i = 0; i < this.number; i++) {","            let s = document.createElement('div');","            s.className = 'star';","            this.appendChild(s);","            this.stars.push(s);","        }","","        this.value = this.value;","    }","","    highlight (index) {","        this.stars.forEach((star, i) => {","            star.classList.toggle('full', i <= index);","        });","    }","","    constructor () {","        super();","","        this.number = this.number;","","        this.addEventListener('mousemove', e => {","            let box = this.getBoundingClientRect(),","                starIndex = Math.floor((e.pageX - box.left) / box.width * this.stars.length);","","            this.highlight(starIndex);","        });","","        this.addEventListener('mouseout', () => {","            this.value = this.value;","        });","","        this.addEventListener('click', e => {","            let box = this.getBoundingClientRect(),","                starIndex = Math.floor((e.pageX - box.left) / box.width * this.stars.length);","","            this.value = starIndex + 1;","","            let rateEvent = new Event('rate');","            this.dispatchEvent(rateEvent);","        });","    }","}","","customElements.define('x-star-rating', StarRating);"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":29,"column":9},"action":"insert","lines":["//initial setup","        document.addEventListener('DOMContentLoaded', function(){","            let stars = document.querySelectorAll('.star');","            stars.forEach(function(star){","                star.addEventListener('click', setRating); ","            });","            ","            let rating = parseInt(document.querySelector('.stars').getAttribute('data-rating'));","            let target = stars[rating - 1];","            target.dispatchEvent(new MouseEvent('click'));","        });","        function setRating(ev){","            let span = ev.currentTarget;","            let stars = document.querySelectorAll('.star');","            let match = false;","            let num = 0;","            stars.forEach(function(star, index){","                if(match){","                    star.classList.remove('rated');","                }else{","                    star.classList.add('rated');","                }","                //are we currently looking at the span that was clicked","                if(star === span){","                    match = true;","                    num = index + 1;","                }","            });","            document.querySelector('.stars').setAttribute('data-rating', num);","        }"],"id":3}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":64},"end":{"row":7,"column":64},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":114,"mode":"ace/mode/javascript"}},"timestamp":1575463980327,"hash":"a21c3f64cb1cac725b603c2775dd2ebce174e84b"}